<!DOCTYPE html>
<html>
<head>
  <title>README</title>
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta charset="UTF-8">
  <style type='text/css'>/* Base body styles */
body {
    /* Consolidated font stack */
    font: 400 16px/1.5 -apple-system, BlinkMacSystemFont, "Segoe UI", Helvetica, Arial, sans-serif, "Apple Color Emoji", "Segoe UI Emoji", "Segoe UI Symbol";
    /* Base text color for the page */
    color: #111;
    /* Page background color */
    background-color: #fbfbfb;
    -webkit-text-size-adjust: 100%;
    -webkit-font-feature-settings: "kern" 1;
    -moz-font-feature-settings: "kern" 1;
    -o-font-feature-settings: "kern" 1;
    font-feature-settings: "kern" 1;
    font-kerning: normal;
    padding: 30px;
}

/* Responsive adjustments */
@media only screen and (max-width: 600px) {
    body {
        padding: 5px;
    }
    body>#content {
        /* Using !important here, be mindful if further overrides are needed */
        padding: 0px 20px 20px 20px !important;
    }
}

/* Main content container styling */
body>#content {
    margin: 0px auto; /* Simplified margin */
    max-width: 900px;
    border: 1px solid #e1e4e8;
    padding: 10px 40px 20px 40px; /* Combined padding */
    border-radius: 2px;
}

/* Details/Summary element styling */
summary {
    cursor: pointer;
    text-decoration: underline;
}

/* Horizontal rule styling */
hr {
    background-color: #bbb;
    height: 1px;
    margin: 1em 0;
    padding: 0;
    border: none;
}

/*
 * NOTE: The .hljs-operator override was removed.
 * It was likely a symptom of the color conflicts.
 * If specific operator colors are still needed after fixing main conflicts,
 * add specific overrides carefully based on the chosen theme.
 */
/*
.hljs-operator {
    color: #868686;
}
*/

/**
 * Links
 */
a {
    color: #0366d6;
    text-decoration: none;
}

/* :visited style same as a, can be combined if desired */
a:visited {
    color: #0366d6;
}

a:hover {
    color: #0366d6;
    text-decoration: underline;
}

/**
 * Code blocks container (<pre>)
 * IMPORTANT: background-color removed to allow Highlight.js dark themes
 * to control the background. If you want a light background for code,
 * remove this comment and use a LIGHT Highlight.js theme instead.
 */
pre {
    /* background-color: #f6f8fa; */ /* REMOVED for dark theme compatibility */
    border-radius: 3px;
    font-size: 85%; /* Makes text slightly smaller than surrounding text */
    line-height: 1.45;
    overflow: auto; /* Adds scrollbars if code overflows */
    padding: 16px;
    /* Optional: Add a subtle border if needed when background is controlled by theme */
    /* border: 1px solid #333; */
}

/**
 * Inline code (not in <pre>)
 */
code {
    background-color: rgba(27, 31, 35, .05); /* Subtle background for inline code */
    border-radius: 3px;
    font-size: 85%; /* Match pre's relative size */
    margin: 0;
    word-wrap: break-word; /* Allow inline code to wrap */
    padding: .2em .4em;
    font-family: SFMono-Regular, Consolas, Liberation Mono, Menlo, Courier, monospace;
}

/**
 * Code inside <pre> blocks - Resetting styles applied by the general 'code' rule
 */
pre > code {
    background-color: transparent; /* Inherit background from pre (or theme) */
    border: 0;
    display: inline; /* Should technically be block or inline-block for layout consistency? Often okay as inline. */
    font-size: 100%; /* Inherit font size from pre */
    line-height: inherit; /* Inherit line height from pre */
    margin: 0;
    overflow: visible;
    padding: 0;
    word-wrap: normal; /* Prevent wrapping within the pre block unless intended */
}


/**
 * Blockquotes
 */
blockquote {
    margin-left: 30px;
    margin-top: 0px;
    margin-bottom: 16px;
    padding: 0 1em;
    color: #828282; /* Base color for blockquote text */
    border-left: 4px solid #e8e8e8;
    padding-left: 15px;
    font-size: 18px;
    letter-spacing: -1px;
    font-style: italic;
}

/* Styles for elements *inside* blockquotes */
blockquote * {
    font-style: normal !important; /* Force non-italic */
    letter-spacing: 0;
    color: #6a737d !important; /* Override inherited color, using !important */
}


/**
 * Tables
 */
table {
    /* border-spacing: 2px; */ /* Usually overridden by border-collapse */
    display: block; /* Needed for overflow */
    font-size: 14px;
    overflow: auto;
    width: 100%;
    margin-bottom: 16px;
    border-spacing: 0;
    border-collapse: collapse;
}

td, th { /* Combined rule for td and th */
    padding: 6px 13px;
    border: 1px solid #dfe2e5;
}

th {
    font-weight: 600;
}

tr {
    background-color: #fff;
    border-top: 1px solid #c6cbd1;
}

table tr:nth-child(2n) {
    background-color: #f6f8fa; /* Zebra striping */
}


/**
 * Other elements
 */
img {
    max-width: 100%;
    height: auto; /* Maintain aspect ratio */
}

p {
    line-height: 1.5; /* Match body line-height */
    font-weight: 400;
    font-size: 16px;
    color: #24292e; /* Specific paragraph color */
    margin-top: 0; /* Default spacing handled by margin-bottom */
    margin-bottom: 16px; /* Consistent bottom margin */
}

ul, ol /* Added ol for ordered lists */ {
    margin-top: 0;
    margin-bottom: 16px; /* Consistent bottom margin */
    padding-left: 2em; /* Indentation for lists */
}

li {
    color: #24292e; /* Specific list item color */
    font-size: 16px;
    font-weight: 400;
    line-height: 1.5;
}

li + li {
    margin-top: 0.25em; /* Spacing between list items */
}

/*
 * NOTE: Removed the universal '*' selector rule that was setting color: #24292e;
 * It conflicted with syntax highlighting themes. Base colors are set on body or specific elements.
 */
/*
* {
    font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Helvetica, Arial, sans-serif, "Apple Color Emoji", "Segoe UI Emoji", "Segoe UI Symbol";
    color: #24292e;
}
*/

/* Redundant :visited rule removed as it's same as a */
/*
a:visited {
    color: #0366d6;
}
*/

/* Heading styles */
h1,
h2,
h3,
h4, /* Added h4, h5, h6 for consistency */
h5,
h6 {
    margin-top: 24px; /* Space above headings */
    margin-bottom: 16px; /* Space below headings */
    font-weight: 600; /* Bolder headings */
    line-height: 1.25;
    color: #111; /* Base heading color */
    border-bottom: 1px solid #eaecef; /* Underline for h1-h3 */
    padding-bottom: .3em; /* Space between text and underline */
}

/* Remove border for lower-level headings */
h4, h5, h6 {
    border-bottom: none;
}

/* Font override for elements within highlighted code. Removed !important */
code > * {
    font-family: Consolas, "Liberation Mono", Menlo, Courier, monospace;
}</style>
  <style type='text/css'>pre code.hljs {
  display: block;
  overflow-x: auto;
  padding: 1em
}
code.hljs {
  padding: 3px 5px
}
/*

Atom One Dark by Daniel Gamage
Original One Dark Syntax theme from https://github.com/atom/one-dark-syntax

base:    #282c34
mono-1:  #abb2bf
mono-2:  #818896
mono-3:  #5c6370
hue-1:   #56b6c2
hue-2:   #61aeee
hue-3:   #c678dd
hue-4:   #98c379
hue-5:   #e06c75
hue-5-2: #be5046
hue-6:   #d19a66
hue-6-2: #e6c07b

*/
.hljs {
  color: #abb2bf;
  background: #282c34
}
.hljs-comment,
.hljs-quote {
  color: #5c6370;
  font-style: italic
}
.hljs-doctag,
.hljs-keyword,
.hljs-formula {
  color: #c678dd
}
.hljs-section,
.hljs-name,
.hljs-selector-tag,
.hljs-deletion,
.hljs-subst {
  color: #e06c75
}
.hljs-literal {
  color: #56b6c2
}
.hljs-string,
.hljs-regexp,
.hljs-addition,
.hljs-attribute,
.hljs-meta .hljs-string {
  color: #98c379
}
.hljs-attr,
.hljs-variable,
.hljs-template-variable,
.hljs-type,
.hljs-selector-class,
.hljs-selector-attr,
.hljs-selector-pseudo,
.hljs-number {
  color: #d19a66
}
.hljs-symbol,
.hljs-bullet,
.hljs-link,
.hljs-meta,
.hljs-selector-id,
.hljs-title {
  color: #61aeee
}
.hljs-built_in,
.hljs-title.class_,
.hljs-class .hljs-title {
  color: #e6c07b
}
.hljs-emphasis {
  font-style: italic
}
.hljs-strong {
  font-weight: bold
}
.hljs-link {
  text-decoration: underline
}</style>
</head>
<body>
  <div id='content'>
<p>内螺纹如果是 <strong>XW</strong> 向后靠修整，需要通过 <strong>XZ</strong> 修整器程序手动修改，修改步骤如下：</p>
<p>首先生成一套 <strong>XZ</strong> 修整器结构的程序。</p>
<p>主程序增加 <strong>W</strong> 轴速度变量：</p>
<pre><code class="hljs">INI[<span class="hljs-number">63</span>]<span class="hljs-operator">=</span><span class="hljs-number">2000</span><span class="hljs-comment">;*W轴快速离开砂轮的速度</span>
INI[<span class="hljs-number">64</span>]<span class="hljs-operator">=</span><span class="hljs-number">2000</span><span class="hljs-comment">;*W轴快速接近砂轮的速度</span></code></pre>
<p><strong>C_DRESS_END_POSITION_CB</strong> 中 <strong>X</strong> 轴后退到安全位后增加一句：</p>
<pre><code class="hljs">G90 G01 <span class="hljs-attribute">W</span>=DRESSER[21] <span class="hljs-attribute">F</span>=INI[63]</code></pre>
<p><strong>C_DRESS_INIT_POSITION_CB</strong> 中程序最后将 <strong>Z</strong> 轴动作改为 <strong>W</strong> 到安全位置：</p>
<pre><code class="hljs"><span class="hljs-attribute">G1</span> G90 W=DRESSER[<span class="hljs-number">33</span>]+DRESSER[<span class="hljs-number">22</span>]/<span class="hljs-number">2</span>+<span class="hljs-number">5</span> F=INI[<span class="hljs-number">63</span>];</code></pre>
<p><strong>C_DRESS_INIT_POSITION_CX</strong> 中 <strong>X</strong> 轴到安全位置后增加一句：</p>
<pre><code class="hljs">G90 G1 <span class="hljs-attribute">W</span>=DRESSER[21] <span class="hljs-attribute">F</span>=INI[63]</code></pre>
<p><strong>E_COMMON_BIGGEST_LOWEST</strong> 中将两个 IF 判断条件反转：</p>
<pre><code class="hljs">IF GRIND[<span class="hljs-number">0</span>]<span class="hljs-operator">=</span><span class="hljs-operator">=</span><span class="hljs-number">1</span><span class="hljs-comment">;</span>
IF GRIND[<span class="hljs-number">0</span>]<span class="hljs-operator">=</span><span class="hljs-operator">=</span><span class="hljs-number">1</span><span class="hljs-comment">;</span></code></pre>
<p><strong>E_COMMON_SHAPE_CACU</strong> 中将一个 IF 判断条件反转：</p>
<pre><code class="hljs">IF GRIND[<span class="hljs-number">0</span>]<span class="hljs-operator">=</span><span class="hljs-operator">=</span><span class="hljs-number">1</span><span class="hljs-comment">;</span></code></pre>
<p><strong>D_EXTERNE_SHAPE</strong> 中将一个 IF 判断条件反转：</p>
<pre><code class="hljs">IF GRIND[<span class="hljs-number">0</span>]<span class="hljs-operator">=</span><span class="hljs-operator">=</span><span class="hljs-number">1</span><span class="hljs-comment">;</span></code></pre>
<p><strong>E_READ_AND_CALC</strong> 中将一个 IF 判断条件反转：</p>
<pre><code class="hljs">IF GRIND[<span class="hljs-number">0</span>]<span class="hljs-operator">=</span><span class="hljs-operator">=</span><span class="hljs-number">1</span><span class="hljs-comment">;</span></code></pre>
<p>语言文本 <strong>almc</strong> 修改：</p>
<pre><code class="hljs"><span class="hljs-symbol">85345 </span><span class="hljs-number">0</span> <span class="hljs-number">0</span> <span class="hljs-string">&quot;X-W&quot;</span>  ;
<span class="hljs-symbol">85626 </span><span class="hljs-number">0</span> <span class="hljs-number">0</span> <span class="hljs-string">&quot;修整中心.W&quot;</span>  ;</code></pre>
<p><strong>a_dress.com</strong> 界面文件修改：</p>
<pre><code class="hljs">    DEF N_CX_X_TYPE=(I//<span class="hljs-number">1</span>//WR4,ac4//<span class="hljs-string">&quot;/NC/_N_NC_GD2_ACX/DRESSER[38]&quot;</span>/<span class="hljs-number">0</span>,<span class="hljs-number">0</span>,<span class="hljs-number">0</span>/<span class="hljs-number">0</span>,<span class="hljs-number">0</span>,<span class="hljs-number">0</span>/);    &lt;<span class="hljs-comment">--赋值为 1</span>

    ...

    PRESS(VS7)
        <span class="hljs-keyword">IF</span> (VAR1.VAL==<span class="hljs-number">0</span>) <span class="hljs-keyword">OR</span> (VAR1.VAL==<span class="hljs-number">2</span>);
            LM(<span class="hljs-string">&quot;MASK11&quot;</span>,<span class="hljs-string">&quot;a_dressware.com&quot;</span>)
        <span class="hljs-keyword">ELSE</span>;
            <span class="hljs-keyword">IF</span> <span class="hljs-keyword">TYPE</span>.VAL==<span class="hljs-number">0</span>;
                LM(<span class="hljs-string">&quot;MASK16&quot;</span>,<span class="hljs-string">&quot;a_dressware.com&quot;</span>)
            <span class="hljs-keyword">ELSE</span>;
                <span class="hljs-keyword">IF</span> N_CX_X_TYPE.VAL==<span class="hljs-number">0</span>;
                    LM(<span class="hljs-string">&quot;MASK17&quot;</span>,<span class="hljs-string">&quot;a_dressware.com&quot;</span>)
                <span class="hljs-keyword">ELSE</span>
                    LM(<span class="hljs-string">&quot;MASK17&quot;</span>,<span class="hljs-string">&quot;a_dressware.com&quot;</span>);     &lt;<span class="hljs-comment">--修改为 MASK17</span>
                ENDIF
            ENDIF
        ENDIF
    END_PRESS

    ...

    SUB(UP3)
        <span class="hljs-keyword">IF</span> VAR1.VAL==<span class="hljs-number">0</span>
            VAR20.VAL=<span class="hljs-string">&quot;V&quot;</span>
            VAR21.VAL=<span class="hljs-string">&quot;W&quot;</span>
        <span class="hljs-keyword">ELSE</span>
            <span class="hljs-keyword">IF</span> VAR1.VAL==<span class="hljs-number">1</span>
                VAR20.VAL=<span class="hljs-string">&quot;X&quot;</span>
                VAR21.VAL=<span class="hljs-string">&quot;W&quot;</span>;    &lt;<span class="hljs-comment">--修改为 W</span>

    ...

        <span class="hljs-keyword">ELSE</span>
            <span class="hljs-keyword">IF</span> VAR1.VAL==<span class="hljs-number">1</span>;
                <span class="hljs-keyword">IF</span> <span class="hljs-keyword">TYPE</span>.VAL&lt;&gt;<span class="hljs-number">1</span>;

                <span class="hljs-keyword">ELSE</span>
                    VAR31.VAL=-(VAR30.VAL-VAR34.VAL/<span class="hljs-number">2</span>-VAR13.VAL/<span class="hljs-number">2</span>);   &lt;<span class="hljs-comment">--括号里修改为两个减号</span>
                ENDIF</code></pre>
<p><strong>a_dressware.com</strong> 界面修改如下：</p>
<pre><code class="hljs">;<span class="hljs-strong">****</span><span class="hljs-strong">****</span><span class="hljs-strong">****</span><span class="hljs-strong">****</span><span class="hljs-strong">****</span><span class="hljs-strong">**MASK12:修整参数<span class="hljs-emphasis">_XZ单滚轮:panel_</span>12:;**</span><span class="hljs-strong">****</span><span class="hljs-strong">****</span><span class="hljs-strong">****</span><span class="hljs-strong">****</span><span class="hljs-strong">****</span>
//M(Mask12/$85380/&quot;panel<span class="hljs-emphasis">_12_</span>1<span class="hljs-emphasis">_chs.png&quot;/)
    ...

    DEF W_</span>IM=(R///$85115,$85115,,/WR1,ac4//&quot;$AA<span class="hljs-emphasis">_IM[W]&quot;/10,30,20/30,30,60/3);  &lt;-- Z 坐标修改为 W

    ...

    SUB(UP3)
        IF TYPE.VAL&lt;&gt;1;

        ELSE
            VAR3.VAL=-(VAR12.VAL-VAR7.VAL/2-VAR10.VAL/2);  &lt;-- 括号里修改为两个减号
        ENDIF

    ...

;<span class="hljs-strong">****</span><span class="hljs-strong">****</span><span class="hljs-strong">****</span><span class="hljs-strong">****</span><span class="hljs-strong">****</span><span class="hljs-strong">**MASK14:修整参数_XZ方滚轮:panel_14:;**</span><span class="hljs-strong">****</span><span class="hljs-strong">****</span><span class="hljs-strong">****</span><span class="hljs-strong">****</span><span class="hljs-strong">****</span>
//M(Mask14/$85382/&quot;panel_</span>14<span class="hljs-emphasis">_1_</span>chs.png&quot;/)

<span class="hljs-code">    ...
</span>
<span class="hljs-code">    DEF W_IM=(R///$85115,$85115,,/WR1,ac4//&quot;$AA_IM[W]&quot;/10,30,20/30,30,60/3);  &lt;-- Z 坐标修改为 W
</span>
<span class="hljs-code">    ...
</span>
<span class="hljs-code">    SUB(UP3)
        IF TYPE.VAL&lt;&gt;1;
</span>
<span class="hljs-code">        ELSE
            VAR3.VAL=-(VAR12.VAL-VAR7.VAL/2-VAR10.VAL/2);  &lt;-- 括号里修改为两个减号
        ENDIF
</span>
<span class="hljs-code">    ...
</span>
;<span class="hljs-strong">****</span><span class="hljs-strong">****</span><span class="hljs-strong">****</span><span class="hljs-strong">****</span><span class="hljs-strong">****</span><span class="hljs-strong">**MASK17:修整参数<span class="hljs-emphasis">_滚压轮X_</span>内<span class="hljs-emphasis">_前:panel_</span>17:;**</span><span class="hljs-strong">****</span><span class="hljs-strong">****</span><span class="hljs-strong">****</span><span class="hljs-strong">****</span><span class="hljs-strong">****</span>
//M(Mask17/$85379/&quot;panel<span class="hljs-emphasis">_17_</span>1<span class="hljs-emphasis">_chs.png&quot;/)

    ...

    DEF W_</span>IM=(R///$85115,$85115,,/WR1,ac4//&quot;$AA<span class="hljs-emphasis">_IM[W]&quot;/10,30,20/30,30,60/3);  &lt;-- Z 坐标修改为 W

    ...

    SUB(UP1)
        VAR3.VAL=-(VAR0.VAL-VAR7.VAL/2-VAR10.VAL/2);  &lt;-- 括号里修改为两个减号
        VAR1.VAL=VAR3.VAL-VAR2.VAL;  &lt;-- 修改为减号
    END_</span>SUB</code></pre>
  </div>
</body>
</html>